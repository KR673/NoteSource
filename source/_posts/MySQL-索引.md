---
title: MySQL-索引
date: 2020-01-14 10:59:24
tags: mysql
---

[toc]

## 1. 索引常见的模型

1. 哈希表 : 因为需要根据key计算哈希值来查找数据, 所以**只适用于等值查询**(*精确查询*) 
2. 二叉树 : *现在想来这种数据结构也只适用于等值查询 ?*
3. N叉树 : 为了减少不同层之间的询址时间对二叉树进行的优化

其他的还有跳表、LSM 树等数据结构

数据库底层存储的**核心**就是基于这些数据模型的。每碰到一个新数据库，我们需要先关注它的数据模型，这样才能从理论上分析出这个数据库的适用场景。

## 2. InnoDB的索引模型

在Mysql中, 索引是由存储引擎实现的, 而InnoDB使用的是**B+树**模型, 所以**数据都是存在B+树**中

现在有一个表, 其中有两个字段, 分别为主键`ID` 和 `K`(有索引的)
对应的五行数据为 `(100,1)、(200,2)、(300,3)、(500,5) 和 (600,6)`

则在InooDB中索引组织结构为下图:

![](https://mynoteimg.oss-cn-beijing.aliyuncs.com/20200114111845.png)

**聚簇索引** : 即主键索引, 由图中可以看出, 主键索引中key对应的是整条记录.
**二级索引** : 即非键索引, 其value中保留的是主键值, 即如果需要根据非主键索引查询, 就需要多查询一次主键索引

> 同时也说明了为什么对条件字段使用函数会导致索引失效, 对字段使用函数会改变这个字段对应的值, 在树中就会找不到对应的key , 所以引擎会放弃使用索引